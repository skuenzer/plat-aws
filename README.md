# Unikraft Cloud Script

This script deploys unikraft generated **XEN** target unikernels on **AWS Cloud Platform**

## Installation

**Configuration**  
Copy the script to `~/.unikraft/`

```
sudo cp config-aws.sh ~/.unikraft/
``` 
- Create a certificate (xyz.pem) using [this](https://docs.aws.amazon.com/acm/latest/userguide/import-certificate-api-cli.html) and copy to `~/.unikraft/` directory
- Create key pair (abc.pem) using [this](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html) and copy to `~/.unikraft/` directory

- Copy the core script to `/usr/local/bin`

```
sudo cp deploy-unikraft-aws.sh /usr/local/bin/
```
Please make sure that `/usr/local/bin` is in your `PATH`

**OR**

You can directly run the script like - 

```bash
./<path/of/deploy-unikraft-aws.sh>
Eg, ./deploy-unikraft-aws.sh (If the script is in current dir)
```


## Usage
Please make sure that you have a working AWS account.  
If not, please create one (click [here](https://aws.amazon.com/)).
 

```
usage: ./deploy-unikraft-aws.sh [-h] [-v] -k <unikernel> -p <config-path> [-n <name>]
     [-b <bucket>] [-r <region>] [-i <instance-type>] [-s]

Mandatory Args:
<unikernel>: 	  Name/Path of the unikernel generated by Unikraft.(Please use "Xen" target images) 
<config-path>:	  Path of the script config file (Default: ~/.unikraft/config-aws.sh)

Optional Args:
<name>: 	  Image name to use on the cloud (default: unikraft)
<bucket>: 	  AWS S3 bucket name (default: unikraft-bucket)
<region>: 	  AWS EC2 region to register AMI (default: eu-central-1)
<instance-type>:  Specify the type of the machine on which you wish to deploy the kernel (default: m3.medium) 
<-v>: 		  Turns on verbose mode
<-s>: 		  Automatically starts an instance on AWS cloud

#########  !!IMPORTANT!!  #############
-- Please set the environment variables in "config-aws.sh" file.
-- Please make sure that following packages are installed:
   - AWS EC2 AMI TOOLS (sudo apt install ec2-ami-tools)
   - AWS EC2 API TOOLS (sudo apt-get install ec2-api-tools)
   - AWS CLI TOOLS (sudo apt  install awscli) 
* Installation commands are given for Debian based systems like Ubuntu.
Please install the packages according to your system.

```

## Bug Report
For major changes, please open an issue first to discuss what you would like to change.
